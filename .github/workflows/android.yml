name: Android CI

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
     - uses: actions/checkout@v1
     
     - name: Write permission for Gradlew
       run: chmod +x ./gradlew
     
     - name: Set Up JDK
       uses: actions/setup-java@v1
       with:
         java-version: 11
       
     - name: Build Project
       run: ./gradlew assemble
       
     - name: Build Debug .apk
       run: |
        # Build the launcher
        ./gradlew :app_mclientresign:assembleDebug
        mv app_mclientresign/build/outputs/apk/debug/app_mclientresign-debug.apk out/app-debug.apk
       
     - name: Upload APK
       uses: actions/upload-artifact@v2
       with:
          name: app-debug
          path: out/app-debug.apk
